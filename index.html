<!DOCTYPE html>
<html>
    <head>
        <title>Smart Table Widget</title>
        <script src="./js/ediable_table.js" type="module"></script>
    </head>
    <body>
        <h1>Test of Smart Table WebBus controller</h1>
        <table border="1" width="100%" id="smart-table">
            <thead>
                <tr>
                    <th data-type="index" data-name="index">Row index</th>
                    <th data-type="int" data-name="field1">Integer</th>
                    <th data-type="float" data-name="field2">Floaing point</th>
                    <th data-type="bool" data-name="field3">Boolean</th>
                    <th data-type="text" data-name="field4">Text line</th>
                    <th data-type="select" data-name="field5">Multi-select</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>123</td>
                    <td>3.14159</td>
                    <td>Yes</td>
                    <td>Some demonstration text</td>
                    <td>Second</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>456</td>
                    <td>1.41421356237</td>
                    <td>No</td>
                    <td>Some other text</td>
                    <td>Third</td>
                </tr>
            </tbody>
        </table>
        <div class="" id="add_button" data-logic="">
            <button id="add">Add a row</button>
            <button id="get_data">Get table data</button>
            <button id="populate">Set data in table</button>
            <div class="output"></div>
        </div>
        <script type="module">
            import EditableTable from './js/ediable_table.js'

            const table = new EditableTable(
                document.getElementById('smart-table'),
                (data) => {
                    console.log(data);
                },
                (index) => {
                    console.log(index);
                },
                {
                    "fields": {
                        "field3": {
                            "labels": {
                                "true": "Yes",
                                "false": "No"
                            }
                        },
                        "field5": {
                            "options": {
                                "1": "First",
                                "2": "Second",
                                "3": "Third"
                            }
                        }
                    }
                }
            );

            document.getElementById('add').addEventListener('click', (e) => {
                table.new_row();
            });

            document.getElementById('get_data').addEventListener('click', (e) => {
                console.log(table.get_values());
            });
        </script>
    </body>
</html>